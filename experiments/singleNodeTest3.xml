<?xml version="1.0"?>
<!DOCTYPE tsung SYSTEM "/opt/local/share/tsung/tsung-1.0.dtd">
<tsung loglevel="info" version="1.0">
	<clients>
		<client host="localhost" use_controller_vm="true" maxusers="1800" />
	</clients>
	<servers>
		<server host="129.215.197.207" port="5222" type="tcp" />
	</servers>
	<load duration="30" unit="minute">
		<arrivalphase phase="1" duration="30" unit="minute">
			<users maxnumber="1800" interarrival="0.5" unit="second"></users>
		</arrivalphase>
	</load>
	<options>
		<!-- this will log in user1..3 -->
		<option type="ts_jabber" name="global_number" value="1800" />
		<option type="ts_jabber" name="userid_max" value="1800" />
		<option type="ts_jabber" name="domain" value="okbook.inf.ed.ac.uk" />
		<option type="ts_jabber" name="username" value="user" />
		<option type="ts_jabber" name="passwd" value="user" />
	</options>
	<sessions>
		<session probability="100" name="jabber-example" type="ts_jabber">
			<transaction name="connection">
				<request>
					<!-- match do="continue" when="match">error</match-->
					<jabber type="connect" ack="local" />
				</request>
			</transaction>
			<thinktime value="1"></thinktime>
			<transaction name="registration">
				<request>
					<match do="continue" when="match">error</match>
					<jabber type="register" ack="local" id="new"/>
				</request>
			</transaction>
			<thinktime value="1"></thinktime>
			<transaction name="authentication">
      				<request> 
      					<jabber type="auth_get" ack="local"></jabber> 
      				</request>
      				<request> 
      					<jabber type="auth_set_plain" ack="local"></jabber> 
      				</request>
      				<request> 
      					<jabber type="presence:initial" ack="local"/> 
      				</request>
    			</transaction>
			<thinktime value="1"></thinktime>
    			<transaction name="online_msg">
		      		<request> 
		      			<jabber type="chat" ack="no_ack" size="16" destination="online"></jabber> 
		      		</request>
			</transaction>
			<transaction name="offline_msg">
      				<request> 
      					<jabber type="chat" ack="no_ack" size="56" destination="offline"></jabber> 
      				</request>
   			</transaction>
			<thinktime value="1800"></thinktime>
    			<!-- transaction name="disconnection">
				<request>
					<jabber type="close" ack="local"/>
				</request>
			</transaction -->
		</session>
	</sessions>
</tsung>
