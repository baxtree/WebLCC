<?xml version="1.0"?>
<!DOCTYPE tsung SYSTEM "/opt/local/share/tsung/tsung-1.0.dtd">
<tsung loglevel="info" version="1.0">
	<clients>
		<client host="localhost" use_controller_vm="true" maxusers="1000"/>
	</clients>
	<servers>
		<server host="129.215.197.207" port="5222" type="tcp"/>
	</servers>
	<load duration="10" unit="minute">
		<arrivalphase phase="1" duration="10" unit="minute">
			<users maxnumber="1000" interarrival="1" unit="second"/>
		</arrivalphase>
	</load>
	<options>
		<option type="ts_jabber" name="global_number" value="1000"/>
		<option type="ts_jabber" name="userid_max" value="1000"/>
		<option type="ts_jabber" name="domain" value="okbook.inf.ed.ac.uk"/>
		<option type="ts_jabber" name="username" value="user"/>
		<option type="ts_jabber" name="passwd" value="user"/>
	</options>
	<sessions>
		<session probability="100" name="jabber-example" type="ts_jabber">
			<request>
				<jabber type="connect" ack="local"/>
			</request>
			<request>
				<match do="abort" when="match">error</match>
				<jabber type="register" ack="local" id="new"/>
			</request>
			<thinktime value="1"/>
			<transaction name="authenticate">
      				<request> <jabber type="auth_get" ack="local"/> </request>
      				<request> <jabber type="auth_set_plain" ack="local"/> </request>
    			</transaction>
		</session>
	</sessions>
</tsung>
